/*!
 * Variations Plugin
 */
(function(b,l,p,m){b.fn.wc_variation_form=function(){b.fn.wc_variation_form.find_matching_variations=function(d,a){var f=[];this.variations={};for(var e=0;e<d.length;e++){var c=d[e];this.variations[c.variation_id]=c.taxonomy;b.fn.wc_variation_form.variations_match(c.attributes,a)&&f.push(c)}return f};b.fn.wc_variation_form.variations_match=function(b,a){var f=!0;for(attr_name in b){var e=b[attr_name],c=a[attr_name];e!==m&&(c!==m&&0!=e.length&&0!=c.length&&e!=c)&&(f=!1)}return f};this.unbind("check_variations update_variation_values found_variation");
this.find(".reset_variations").unbind("click");this.find(".variations select").unbind("change focusin");return this.on("reset",function(){b(this).wc_variation_form();b(this).closest(".variations select").change()}).on("change",'input[name="variation_id"]',function(){if(b(this).val()&&"object"===typeof b.fn.wc_variation_form.variations[b(this).val()]){var d=b.fn.wc_variation_form.variations[b(this).val()],a;for(a in d)for(var f in d[a]){var e=[".changeable.attribute."+a+" ."+f,".changeable.attribute."+
a+"."+f].join();b(e).html(d[a][f])}}}).on("click",".reset_variations",function(){b(this).closest("form.variations_form").find(".variations select").val("").change();var d=b(this).closest(".product").find(".sku"),a=b(this).closest(".product").find(".product_weight"),f=b(this).closest(".product").find(".product_dimensions");d.attr("data-o_sku")&&d.text(d.attr("data-o_sku"));a.attr("data-o_weight")&&a.text(a.attr("data-o_weight"));f.attr("data-o_dimensions")&&f.text(f.attr("data-o_dimensions"));return!1}).on("change",
".variations select",function(){$variation_form=b(this).closest("form.variations_form");$variation_form.find("input[name=variation_id]").val("").change();$variation_form.trigger("woocommerce_variation_select_change").trigger("check_variations",["",!1]);b(this).blur();b().uniform&&b.isFunction(b.uniform.update)&&b.uniform.update()}).on("focusin",".variations select",function(){$variation_form=b(this).closest("form.variations_form");$variation_form.trigger("woocommerce_variation_select_focusin").trigger("check_variations",
[b(this).attr("name"),!0])}).on("check_variations",function(d,a,f){var e=!0,c=!1,h={};d=b(this);var g=d.find(".reset_variations");d.find(".variations select").each(function(){0==b(this).val().length?e=!1:c=!0;a&&b(this).attr("name")==a?(e=!1,h[b(this).attr("name")]=""):(value=b(this).val(),h[b(this).attr("name")]=value)});var j=parseInt(d.data("product_id")),k=d.data("product_variations");k||(k=l.product_variations[j]);k||(k=l.product_variations);k||(k=l["product_variations_"+j]);j=b.fn.wc_variation_form.find_matching_variations(k,
h);e?(j=j.pop())?(d.find("input[name=variation_id]").val(j.variation_id).change(),d.trigger("found_variation",[j])):(d.find(".variations select").val(""),f||d.trigger("reset_image"),alert(woocommerce_params.i18n_no_matching_variations_text)):(d.trigger("update_variation_values",[j]),f||d.trigger("reset_image"),a||d.find(".single_variation_wrap").slideUp("200"));c?"hidden"==g.css("visibility")&&g.css("visibility","visible").hide().fadeIn():g.css("visibility","hidden")}).on("reset_image",function(){var d=
b(this).closest(".product"),a=d.find("div.images img:eq(0)"),d=d.find("div.images a.zoom:eq(0)"),f=a.attr("data-o_src"),e=a.attr("data-o_title"),c=d.attr("data-o_href");f&&a.attr("src",f);c&&d.attr("href",c);e&&(a.attr("alt",e).attr("title",e),d.attr("title",e))}).on("update_variation_values",function(d,a){$variation_form=b(this).closest("form.variations_form");$variation_form.find(".variations select").each(function(d,e){current_attr_select=b(e);current_attr_select.data("attribute_options")||current_attr_select.data("attribute_options",
current_attr_select.find("option:gt(0)").get());current_attr_select.find("option:gt(0)").remove();current_attr_select.append(current_attr_select.data("attribute_options"));current_attr_select.find("option:gt(0)").removeClass("active");var c=current_attr_select.attr("name");for(num in a)if("undefined"!=typeof a[num]){var h=a[num].attributes;for(attr_name in h){var g=h[attr_name];attr_name==c&&(g?(g=b("<div/>").html(g).text(),g=g.replace(/'/g,"\\'"),g=g.replace(/"/g,'\\"'),current_attr_select.find('option[value="'+
g+'"]').addClass("active")):current_attr_select.find("option:gt(0)").addClass("active"))}}current_attr_select.find("option:gt(0):not(.active)").remove()});$variation_form.trigger("woocommerce_update_variation_values")}).on("found_variation",function(d,a){var f=b(this),e=b(".product"),c=e.find("div.images img:eq(0)"),h=e.find("div.images a.zoom:eq(0)"),g=c.attr("data-o_src"),j=c.attr("data-o_title"),k=h.attr("data-o_href"),l=a.image_src,m=a.image_link,n=a.image_title;f.find(".variations_button").show();
f.find(".single_variation").html(a.price_html+a.availability_html);g||(g=!c.attr("src")?"":c.attr("src"),c.attr("data-o_src",g));k||(k=!h.attr("href")?"":h.attr("href"),h.attr("data-o_href",k));j||(j=!c.attr("title")?"":c.attr("title"),c.attr("data-o_title",j));l&&1<l.length?(c.attr("src",l).attr("alt",n).attr("title",n),h.attr("href",m).attr("title",n)):(c.attr("src",g).attr("alt",j).attr("title",j),h.attr("href",k).attr("title",j));c=f.find(".single_variation_wrap");h=e.find(".product_meta").find(".sku");
g=e.find(".product_weight");e=e.find(".product_dimensions");h.attr("data-o_sku")||h.attr("data-o_sku",h.text());g.attr("data-o_weight")||g.attr("data-o_weight",g.text());e.attr("data-o_dimensions")||e.attr("data-o_dimensions",e.text());a.sku?h.text(a.sku):h.text(h.attr("data-o_sku"));a.weight?g.text(a.weight):g.text(g.attr("data-o_weight"));a.dimensions?e.text(a.dimensions):e.text(e.attr("data-o_dimensions"));c.find(".quantity").show();!a.is_in_stock&&!a.backorders_allowed&&f.find(".variations_button").hide();
a.min_qty?c.find("input[name=quantity]").attr("min",a.min_qty).val(a.min_qty):c.find("input[name=quantity]").removeAttr("min");a.max_qty?c.find("input[name=quantity]").attr("max",a.max_qty):c.find("input[name=quantity]").removeAttr("max");"yes"==a.is_sold_individually&&(c.find("input[name=quantity]").val("1"),c.find(".quantity").hide());c.slideDown("200").trigger("show_variation",[a])})}})(jQuery,window,document);